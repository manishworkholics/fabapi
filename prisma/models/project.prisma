model Project {
  id Int @id @default(autoincrement())

  quoteId String @unique
  quote   Quote  @relation(fields: [quoteId], references: [quoteId])

  pmId Int
  pm   User @relation("PM_Projects", fields: [pmId], references: [id])

  emsId Int
  ems   User @relation("EMS_Projects", fields: [emsId], references: [id])

  status  ProjectStatus          @default(ASSIGNED)
  history ProjectStatusHistory[]

  purchaseOrder PurchaseOrder?

  createdAt DateTime @default(now())

  @@index([pmId])
  @@index([emsId])
}

enum ProjectStatus {
  ASSIGNED
  IN_PROGRESS
  MANUFACTURING
  ON_HOLD
  COMPLETED
}

model ProjectStatusHistory {
  id        Int           @id @default(autoincrement())
  projectId Int
  status    ProjectStatus
  note      String?
  createdAt DateTime      @default(now())

  project Project @relation(fields: [projectId], references: [id])
}
